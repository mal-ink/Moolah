<!DOCTYPE html>
<html>
<head>
  <title>Reset Password</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="signup-page">
  <div class='wrapper'>
    <div class="home-link">
      <a href="account.html">Back</a><br><br>
    </div>
    <form id="resetForm">
      <fieldset style="background-color: rgb(230, 240, 230);">
        <legend>Reset Password:</legend>
        Username:<br>
        <input type="text" name="username" placeholder="malini123" required><br><br>
        Email:<br>
        <input type="email" name="email" placeholder="hello@gmail.com" required><br><br>
        <input type="submit" value="Reset">
      </fieldset>
    </form>
  </div>

  <script>
   document.getElementById('resetForm').onsubmit = async function(e) {
  e.preventDefault();

  const username = document.querySelector('input[name="username"]').value;
  const email = document.querySelector('input[name="email"]').value;

  try {
    const res = await fetch('https://moolah-sy5t.onrender.com/reset-password', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ username, email })
    });
 
    const result = await res.json(); 
    if (res.ok) {
      alert(result.message);
    alert('A reset link has been sent to your email.');
    } else {
      alert(result.error || 'Reset failed.');
    }
  } catch (err) {
    console.error('Reset error:', err);
    alert('Something went wrong. Try again.');
  }
};
  </script>
</body>
</html>
