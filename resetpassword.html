<!DOCTYPE html>
<html>
<head>
  <title>Reset Password</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="signup-page">
  <div class='wrapper'>
    <div class="home-link">
      <a href="account.html">Back</a><br><br>
    </div>
    <form id="resetForm">
      <fieldset style="background-color: rgb(230, 240, 230);">
        <legend>Reset Password:</legend>
        Username:<br>
        <input type="text" name="username" placeholder="malini123" required><br><br>
        Email:<br>
        <input type="email" name="email" placeholder="hello@gmail.com" required><br><br>
        <input type="submit" value="Reset">
      </fieldset>
    </form>
  </div>

  <script>
    document.getElementById('resetForm').onsubmit = async function (e) {
      e.preventDefault();

      const username = e.target.username.value.trim();
      const email = e.target.email.value.trim();

      const payload = {
        username,
        email
      };

      try {
        const res = await fetch('http://localhost:3000/reset-password', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(payload)
        });

        const result = await res.json();

        if (res.ok) {
          window.location.href = 'reset confirmation.html';
        } else {
          alert(result.error || 'Something went wrong.');
        }
      } catch (err) {
        console.error("Reset error:", err);
        alert("Server error. Try again.");
      }
    };
  </script>
</body>
</html>
